<?xml version="1.0" encoding="UTF-8"?>
<workflow xmlns="http://www.wldelft.nl/fews" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.wldelft.nl/fews http://fews.wldelft.nl/schemas/version1.0/workflow.xsd" version="1.1">
	<!-- Run MESH Model Forecast -->
	<properties>
		<string key="FORECAST" value="RDPS"/>
		<string key="STARTTIME" value="-1"/>
		<string key="ENDTIME" value="2"/>
		<string key="INPUTTIMESERIES" value="ImportRDPS"/>
		<string key="PARAMETER1" value="TA.nwp"/>
		<string key="PARAMETER2" value="PC.nwp"/>
		<string key="OUTPUTTIMESERIES" value="$MODELNAME1$RDPSForecast"/>
		<string key="PARAMETER4" value="QR.sim"/>
		<string key="PARAMETER5" value="SWE.sim"/>
		<string key="PARAMETER6" value="PC.sim"/>
		<string key="PARAMETER7" value="TA.sim"/>
		<string key="PARAMETER8" value="PET.sim"/>
		<string key="LOCATION" value="$MODELNAME1$Grid"/>
		<string key="TIMESTEP" value="$MODEL1_TIMESTEP$"/>
		<string key="TYPE1" value="external forecasting"/>
		<string key="TYPE2" value="simulated forecasting"/>
		<string key="OUTPUTGRID" value="$MODELNAME1$Grid"/>
		<string key="HISTORICMODULEINSTANCE" value="MergeHistoricGrids"/>
		<string key="FORECASTMODULEINSTANCE" value="ImportRDPS"/>
		<string key="ENSEMBLE" value="main"/>
	</properties>
	
<!--Set Forecast Length-->
	<activity>
		<runIndependent>true</runIndependent>
		<moduleInstanceId>SetForecastLengthRDPS</moduleInstanceId>
		<moduleConfigFileName>SetForecastLengthTemplate</moduleConfigFileName>
	</activity>
	
<!-- Apply Modifiers to Gridded Input Data-->
	<activity>
		<runIndependent>true</runIndependent>
		<moduleInstanceId>ModifyRDPS</moduleInstanceId>
		<moduleConfigFileName>ModifyForecastGridsTemplate</moduleConfigFileName>
	</activity>
	
<!-- Merge Historic and Forecast Data-->
	<activity>
		<runIndependent>true</runIndependent>
		<moduleInstanceId>MergeRDPS</moduleInstanceId>
		<moduleConfigFileName>MergeForecastGridsDetTemplate</moduleConfigFileName>
	</activity>

<!--Run model in for RDPS Forecast --> 
	<activity>
	<properties>
		<string key="MODELINPUTMODULEINSTANCE" value="MergeRDPS"></string>
	</properties>
		<runIndependent>true</runIndependent>
		<moduleInstanceId>$MODELNAME1$RDPSForecast</moduleInstanceId>
		<moduleConfigFileName>$MODELNAME1$ForecastTemplate</moduleConfigFileName>
	</activity>

	<!-- Postprocess Model Results-->
	<activity>
	<properties>
		<string key="TIMESERIESTYPE" value="simulated forecasting"/>
		<string key="PARAMETER" value="QR.sim"/>
		<string key="ENSEMBLE" value="main"/>
		<string key="STATIONLOCATIONS" value="$MODELNAME2$HydroStations"/>
		<string key="TIMESTEP" value="$DAY_TIMESTEP$"/>
	</properties>
		<runIndependent>true</runIndependent>
		<moduleInstanceId>$MODELNAME1$RDPSForecast</moduleInstanceId>
		<moduleConfigFileName>PostprocessModelOutputToStationTemplate</moduleConfigFileName>
	</activity>
</workflow>